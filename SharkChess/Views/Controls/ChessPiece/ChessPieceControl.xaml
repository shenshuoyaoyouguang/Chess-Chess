<UserControl x:Class="SharkChess.Views.Controls.ChessPiece.ChessPieceControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="60" Height="60"
             RenderTransformOrigin="0.5,0.5"
             UseLayoutRounding="True"
             SnapsToDevicePixels="True">
    
    <UserControl.Resources>
        <ResourceDictionary Source="PieceDecorationResources.xaml"/>
    </UserControl.Resources>
    
    <Grid x:Name="PieceRoot">
        <Grid.RenderTransform>
            <TransformGroup>
                <ScaleTransform x:Name="ScaleTransform" ScaleX="1" ScaleY="1"/>
                <TranslateTransform x:Name="TranslateTransform" X="0" Y="0"/>
            </TransformGroup>
        </Grid.RenderTransform>
        
        <!-- ========== 第 1 层：阴影（模拟悬浮效果） ========== -->
        <Path x:Name="ShadowLayer"
              Data="{StaticResource PieceCircle}"
              Opacity="0.5"
              RenderTransformOrigin="0.5,0.5"
              Visibility="Collapsed">
            <Path.Fill>
                <RadialGradientBrush GradientOrigin="0.5,0.5" Center="0.5,0.5">
                    <GradientStop Color="#20000000" Offset="0.3"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </RadialGradientBrush>
            </Path.Fill>
            <Path.RenderTransform>
                <TranslateTransform x:Name="ShadowOffset" X="0" Y="0"/>
            </Path.RenderTransform>
            <Path.Effect>
                <BlurEffect Radius="8"/>
            </Path.Effect>
        </Path>
        
        <!-- ========== 第 2 层：外圈边框（立体边缘） ========== -->
        <Path x:Name="OuterRing"
              Data="{StaticResource PieceOuterRing}"
              StrokeThickness="3"
              StrokeLineJoin="Round"
              StrokeStartLineCap="Round"
              StrokeEndLineCap="Round"/>
        
        <!-- ========== 第 3 层：棋子主体（径向渐变模拟木质纹理） ========== -->
        <Path x:Name="PieceBody"
              Data="{StaticResource PieceCircle}">
            <Path.Fill>
                <RadialGradientBrush x:Name="BodyGradient"
                                     GradientOrigin="0.35,0.35"
                                     Center="0.5,0.5"
                                     RadiusX="0.5"
                                     RadiusY="0.5">
                    <GradientStop x:Name="GradientLight" Color="#FFFEFAF0" Offset="0"/>
                    <GradientStop x:Name="GradientMid" Color="#FFF5E6D3" Offset="0.5"/>
                    <GradientStop x:Name="GradientDark" Color="#FFE6D4B8" Offset="1"/>
                </RadialGradientBrush>
            </Path.Fill>
        </Path>
        
        <!-- ========== 第 4 层：内圈装饰线 ========== -->
        <Path x:Name="InnerRing"
              Data="{StaticResource PieceInnerRing}"
              StrokeThickness="1"
              Fill="Transparent"
              Opacity="0.4"/>
        
        <!-- ========== 第 5 层：装饰纹样（回纹/云纹/简约） ========== -->
        <Path x:Name="DecorationLayer"
              Data="{StaticResource MeanderRing}"
              StrokeThickness="1.2"
              Fill="Transparent"
              Opacity="0.5"
              Stretch="Uniform"
              Width="46" Height="46"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"/>
        
        <!-- ========== 第 6 层：汉字（支持书法字体） ========== -->
        <TextBlock x:Name="PieceText"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontSize="28"
                   FontWeight="Bold"
                   FontFamily="KaiTi"
                   TextOptions.TextRenderingMode="ClearType"
                   TextOptions.TextFormattingMode="Ideal"
                   TextOptions.TextHintingMode="Animated">
            <TextBlock.Effect>
                <DropShadowEffect x:Name="TextShadow"
                                  Direction="315" 
                                  ShadowDepth="1.5" 
                                  BlurRadius="2" 
                                  Opacity="0.4"
                                  Color="Black"/>
            </TextBlock.Effect>
        </TextBlock>
        
        <!-- ========== 第 7 层：高光效果（模拟光泽表面） ========== -->
        <Path x:Name="HighlightLayer"
              Data="{StaticResource PieceCircle}"
              Opacity="0.3"
              IsHitTestVisible="False">
            <Path.Fill>
                <RadialGradientBrush GradientOrigin="0.3,0.25"
                                     Center="0.35,0.3"
                                     RadiusX="0.35"
                                     RadiusY="0.3">
                    <GradientStop x:Name="HighlightCenter" Color="#80FFFFFF" Offset="0"/>
                    <GradientStop x:Name="HighlightEdge" Color="Transparent" Offset="1"/>
                </RadialGradientBrush>
            </Path.Fill>
        </Path>
        
        <!-- ========== 第 8 层：选中光环（动画效果） ========== -->
        <Path x:Name="SelectionGlowLayer"
              Data="{StaticResource SelectionGlow}"
              StrokeThickness="4"
              Opacity="0"
              Visibility="Collapsed">
            <Path.Stroke>
                <RadialGradientBrush GradientOrigin="0.5,0.5" Center="0.5,0.5">
                    <GradientStop Color="#FFFFD700" Offset="0"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </RadialGradientBrush>
            </Path.Stroke>
            <Path.Effect>
                <BlurEffect Radius="6"/>
            </Path.Effect>
        </Path>
    </Grid>
</UserControl>
