# é²¨é±¼è±¡æ£‹ (SharkChess) - é¡¹ç›®ä¸Šä¸‹æ–‡æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**é²¨é±¼è±¡æ£‹** æ˜¯ä¸€æ¬¾ä¸­å›½è±¡æ£‹æ¡Œé¢è½¯ä»¶ï¼Œæä¾›å›¾å½¢åŒ–å¯¹å¼ˆç•Œé¢ï¼Œæ”¯æŒ UCI åè®®å¼•æ“ï¼Œå…·å¤‡å®Œæ•´çš„ä¸­å›½è±¡æ£‹è§„åˆ™å®ç°å’Œå¤šä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ã€‚

### ç‰ˆæœ¬ä¿¡æ¯

| é¡¹ç›® | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **WPF é‡æ„ç‰ˆ** | 1.0.0 | åŸºäº .NET 8.0 é‡å†™ |
| **åŸç‰ˆé²¨é±¼è±¡æ£‹** | 1.8.0 (2024-06-15) | å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ |

### æ ¸å¿ƒç‰¹æ€§

- ğŸ® å®Œæ•´çš„ä¸­å›½è±¡æ£‹è§„åˆ™éªŒè¯ï¼ˆé©¬è„šã€è±¡çœ¼ã€ç‚®ç¿»å±±ç­‰ï¼‰
- ğŸ¤– æ”¯æŒ UCI åè®®å¼•æ“ï¼ˆPikafishã€SA Chessã€è‡ªç ” SharkEngineï¼‰
- ğŸ¨ ä¸‰ç§è§†è§‰ä¸»é¢˜ï¼ˆæ ‡å‡†è§„èŒƒç‰ˆã€æ•™å­¦ä¸“ç”¨ç‰ˆã€å›½é£è®¾è®¡ç‰ˆï¼‰
- ğŸ“œ èµ°æ£‹è®°å½•å’Œå†å²å›æ”¾
- â†©ï¸ æ‚”æ£‹åŠŸèƒ½
- ğŸ’¾ FEN æ ¼å¼å¯¼å‡º

---

## é¡¹ç›®ç»“æ„

```
D:\AI\
â”œâ”€â”€ SharkChess.sln                 # Visual Studio è§£å†³æ–¹æ¡ˆ
â”œâ”€â”€ SharkChess/                    # WPF ä¸»åº”ç”¨ç¨‹åº
â”œâ”€â”€ SharkChess.Core/               # æ ¸å¿ƒåº“ï¼ˆç©ºç›®å½•ï¼Œæœªçº³å…¥è§£å†³æ–¹æ¡ˆï¼‰
â”œâ”€â”€ SharkEngine/                   # C++ è‡ªç ”å¼•æ“
â”œâ”€â”€ engine/                        # å¤–éƒ¨å¼•æ“ç›®å½•
â”‚   â”œâ”€â”€ pikafish/                  # çš®å¡é±¼å¼•æ“ï¼ˆæœ€å¼ºå¼€æºï¼‰
â”‚   â””â”€â”€ sachess1.6/                # SA Chess å¼•æ“
â”œâ”€â”€ obk/                           # å¼€å±€åº“
â””â”€â”€ .iflow/                        # iFlow é…ç½®ç›®å½•ï¼ˆç©ºï¼‰
```

---

## é¡¹ç›®ç»„æˆ

### 1. SharkChess (WPF ä¸»ç¨‹åº)

**æŠ€æœ¯æ ˆï¼š**

- ç›®æ ‡æ¡†æ¶ï¼š`.NET 8.0 Windows`
- UI æ¡†æ¶ï¼š`WPF (Windows Presentation Foundation)`
- ç¼–ç¨‹è¯­è¨€ï¼š`C#`
- ä¾èµ–æ³¨å…¥ï¼š`Microsoft.Extensions.DependencyInjection 8.0.0`

**ç›®å½•ç»“æ„ï¼š**

```
SharkChess/
â”œâ”€â”€ App.xaml(.cs)                  # åº”ç”¨å…¥å£ï¼ŒDI é…ç½®
â”œâ”€â”€ MainWindow.xaml(.cs)           # ä¸»çª—å£ï¼ˆä¸‰æ å¸ƒå±€ï¼‰
â”œâ”€â”€ Models/ChessModels.cs          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ Services/                      # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ IGameService.cs / GameService.cs      # æ¸¸æˆè§„åˆ™å®ç°
â”‚   â”œâ”€â”€ IEngineService.cs / EngineService.cs  # UCI å¼•æ“é€šä¿¡
â”‚   â””â”€â”€ IThemeService.cs / ThemeService.cs    # ä¸»é¢˜ç®¡ç†
â”œâ”€â”€ ViewModels/                    # MVVM è§†å›¾æ¨¡å‹
â”‚   â”œâ”€â”€ ViewModelBase.cs           # MVVM åŸºç±»
â”‚   â””â”€â”€ MainViewModel.cs           # ä¸»çª—å£ VM + RelayCommand
â”œâ”€â”€ Views/Controls/
â”‚   â””â”€â”€ ChessBoardControl.cs       # æ£‹ç›˜æ¸²æŸ“æ§ä»¶ï¼ˆ9:10 æ¯”ä¾‹ï¼‰
â”œâ”€â”€ Styles/
â”‚   â””â”€â”€ CommonStyles.xaml          # é€šç”¨æ ·å¼
â”œâ”€â”€ Themes/
â”‚   â”œâ”€â”€ StandardTheme.xaml         # æ ‡å‡†è§„èŒƒç‰ˆ
â”‚   â”œâ”€â”€ TeachingTheme.xaml         # æ•™å­¦ä¸“ç”¨ç‰ˆ
â”‚   â””â”€â”€ ChineseStyleTheme.xaml     # å›½é£è®¾è®¡ç‰ˆ
â”œâ”€â”€ Converters/                    # è½¬æ¢å™¨ï¼ˆç©ºç›®å½•ï¼‰
â””â”€â”€ Resources/                     # èµ„æºæ–‡ä»¶ï¼ˆç©ºç›®å½•ï¼‰
```

**æ ¸å¿ƒæ¨¡å‹ (`Models/ChessModels.cs`)ï¼š**

```csharp
public enum PieceType { None, King, Advisor, Bishop, Knight, Rook, Cannon, Pawn }
public enum PieceColor { Red, Black, None }
public enum GameState { Ongoing, RedWin, BlackWin, Draw }
public enum BoardTheme { Standard, Teaching, ChineseStyle }

public readonly struct Square { int File; int Rank; }  // æ£‹ç›˜åæ ‡ (1-9, 1-10)
public readonly struct Move { Square From; Square To; PieceType Captured; }
```

**æœåŠ¡å±‚èŒè´£ï¼š**

| æœåŠ¡ | èŒè´£ | å®Œæˆåº¦ |
|------|------|--------|
| `GameService` | èµ°æ£‹è§„åˆ™éªŒè¯ã€åˆæ³•èµ°æ³•ç”Ÿæˆã€FEN å¯¼å‡ºã€æ¸¸æˆçŠ¶æ€ç®¡ç† | 90% |
| `EngineService` | UCI åè®®é€šä¿¡ã€å¼•æ“è¿›ç¨‹ç®¡ç†ã€å¼‚æ­¥æ¶ˆæ¯è§£æ | 85% |
| `ThemeService` | ä¸»é¢˜é…ç½®åŠ è½½ã€æ£‹ç›˜æ ·å¼ç®¡ç† | 100% |

**æ¶æ„æ¨¡å¼ï¼š**

å½“å‰é‡‡ç”¨ **MVVM ä¸ Code-Behind æ··åˆæ¨¡å¼**ï¼š
- `MainViewModel` å®ç°äº† `INotifyPropertyChanged` å’Œå‘½ä»¤ç»‘å®šï¼Œä½†æœªåœ¨ `MainWindow` ä¸­å®é™…ä½¿ç”¨
- `MainWindow` ç›´æ¥ä¾èµ–æœåŠ¡å±‚ï¼Œé€šè¿‡äº‹ä»¶è®¢é˜…å®ç°æ•°æ®æ›´æ–°
- `ChessBoardControl` ç»§æ‰¿ `FrameworkElement`ï¼Œä½¿ç”¨ `OnRender` ç›´æ¥ç»˜åˆ¶

---

### 2. SharkEngine (C++ è‡ªç ”å¼•æ“)

**æŠ€æœ¯æ ˆï¼š**

- C++ æ ‡å‡†ï¼š`C++17`
- æ„å»ºå·¥å…·ï¼š`CMake` / `Visual Studio 2022 (v143)`
- ç›®æ ‡å¹³å°ï¼š`x64`
- ä¼˜åŒ–çº§åˆ«ï¼š`/O2` + `/arch:AVX2` (CMake)

**ç›®å½•ç»“æ„ï¼š**

```
SharkEngine/
â”œâ”€â”€ CMakeLists.txt                 # CMake æ„å»ºé…ç½®
â”œâ”€â”€ SharkEngine.vcxproj            # VS é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ Types.h                # åŸºç¡€ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ Board.h                # æ£‹ç›˜ç±»ï¼ˆ90 æ ¼æ•°ç»„ï¼‰
â”‚   â”‚   â”œâ”€â”€ MoveGen.h              # èµ°æ³•ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ Search.h               # Alpha-Beta æœç´¢
â”‚   â”‚   â””â”€â”€ Evaluation.h           # å±€é¢è¯„ä¼°
â”‚   â””â”€â”€ uci/
â”‚       â””â”€â”€ UCIProtocol.h          # UCI åè®®å¤„ç†
â””â”€â”€ src/
    â”œâ”€â”€ main.cpp                   # ç¨‹åºå…¥å£
    â””â”€â”€ core/
        â”œâ”€â”€ Board.cpp              # æ£‹ç›˜å®ç°ï¼ˆFENã€Zobrist å“ˆå¸Œï¼‰
        â”œâ”€â”€ MoveGen.cpp            # èµ°æ³•ç”Ÿæˆï¼ˆé©¬è„šã€è±¡çœ¼æ£€æµ‹ï¼‰
        â”œâ”€â”€ Search.cpp             # æœç´¢ç®—æ³•ï¼ˆAlpha-Beta + é™æ€æœç´¢ï¼‰
        â””â”€â”€ Evaluation.cpp         # è¯„ä¼°å‡½æ•°ï¼ˆå­åŠ›ä»·å€¼ + ä½ç½®è¡¨ï¼‰
```

**æ£‹å­ä»·å€¼ä½“ç³»ï¼š**

| æ£‹å­ | ä»·å€¼ | ä¸­æ–‡å |
|------|------|--------|
| King | 10000 | å°†/å¸… |
| Rook | 900 | è½¦ |
| Cannon | 450 | ç‚® |
| Knight | 400 | é©¬ |
| Advisor | 200 | å£«/ä»• |
| Bishop | 200 | è±¡/ç›¸ |
| Pawn | 100 | å…µ/å’ |

**æœç´¢ç®—æ³•å®ç°çŠ¶æ€ï¼š**

| ç®—æ³• | çŠ¶æ€ | æ–‡ä»¶ä½ç½® |
|------|------|----------|
| Alpha-Beta å‰ªæ | âœ… å·²å®ç° | `Search.cpp:55-100` |
| é™æ€æœç´¢ (Quiescence) | âœ… å·²å®ç° | `Search.cpp:105-130` |
| MVV-LVA èµ°æ³•æ’åº | âœ… å·²å®ç° | `Search.cpp:135-155` |
| è¿­ä»£åŠ æ·±æ¡†æ¶ | âš ï¸ æ¡†æ¶å·²å­˜åœ¨ | `Search.cpp:35-50` |
| å¼‚æ­¥æœç´¢ | âŒ ä»…æ¡†æ¶ | `Search.cpp:185-188` |

**è¯„ä¼°å‡½æ•°å®ç°çŠ¶æ€ï¼š**

| è¯„ä¼°é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| å­åŠ›ä»·å€¼ (materialScore) | âœ… å·²å®ç° | åŸºäºæ£‹å­ä»·å€¼è¡¨ |
| ä½ç½®ä»·å€¼ (positionScore) | âœ… å·²å®ç° | æ£‹å­ä½ç½®åŠ æˆ |
| æœºåŠ¨æ€§è¯„ä¼° (mobilityScore) | âŒ è¿”å› 0 | å¾…å®ç° |
| å°†å¸…å®‰å…¨ (kingSafetyScore) | âŒ è¿”å› 0 | å¾…å®ç° |

**UCI åè®®æ”¯æŒï¼š**

| å‘½ä»¤ | çŠ¶æ€ | å‘½ä»¤ | çŠ¶æ€ |
|------|------|------|------|
| `uci` | âœ… | `position` | âœ… |
| `isready` | âœ… | `go` | âœ… |
| `ucinewgame` | âœ… | `stop` | âœ… |
| `setoption` | âœ… | `quit` | âœ… |
| `ponderhit` | âš ï¸ æ¡†æ¶ | `d` (debug) | âœ… |

**å½“å‰çŠ¶æ€ï¼š** å¼€å‘ä¸­ï¼Œæœªç¼–è¯‘

---

### 3. SharkChess.Core (å¾…å¼€å‘)

**å½“å‰çŠ¶æ€ï¼š** ç©ºç›®å½•ï¼ŒæœªåŒ…å«åœ¨è§£å†³æ–¹æ¡ˆä¸­

**é¢„æœŸç”¨é€”ï¼š**

- å°†æ ¸å¿ƒé€»è¾‘ï¼ˆModelsã€Servicesï¼‰ä¸ UI å±‚åˆ†ç¦»
- ä¾¿äºå•å…ƒæµ‹è¯•å’Œä»£ç å¤ç”¨
- å®ç°æ›´å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»

**å†³ç­–å»ºè®®ï¼š**

- è‹¥é¡¹ç›®ä¿æŒå½“å‰è§„æ¨¡ï¼Œå¯åˆ é™¤æ­¤ç›®å½•
- è‹¥è®¡åˆ’æ‰©å±•ä¸ºå¤šé¡¹ç›®è§£å†³æ–¹æ¡ˆï¼ˆå¦‚æ·»åŠ å•å…ƒæµ‹è¯•ã€å‘½ä»¤è¡Œå·¥å…·ï¼‰ï¼Œå»ºè®®ä¿ç•™å¹¶å¡«å……

---

### 4. å¤–éƒ¨å¼•æ“ (engine/)

#### Pikafish (çš®å¡é±¼) - æ¨èä½¿ç”¨

- **å®˜ç½‘ï¼š** http://pikafish.com
- **GitHubï¼š** https://github.com/official-pikafish/Pikafish
- **æœ€æ–°ç‰ˆæœ¬ï¼š** 2025.06.27
- **ç‰¹ç‚¹ï¼š** æœ€å¼ºå¼€æºä¸­å›½è±¡æ£‹å¼•æ“ï¼ŒåŸºäº Stockfish æ¶æ„ï¼Œä½¿ç”¨ NNUE ç¥ç»ç½‘ç»œ
- **æƒé‡æ–‡ä»¶ï¼š** `pikafish.nnue`

**ä½œè€…å›¢é˜Ÿï¼š**

- **åˆ›å§‹äººï¼š** PikaCat++ã€New Horizonsã€d:blueã€Vincentzyx
- **è´¡çŒ®è€…ï¼š** afkbadã€Celine chenã€æ°å“¥æ•™ä½ ç™» dua éƒ ç­‰

**å¯ç”¨å¼•æ“ç‰ˆæœ¬ï¼ˆæŒ‰æ€§èƒ½æ’åºï¼‰ï¼š**

```
vnni512 > bw512 > avx512 > avxvnni > bmi2 > avx2 > sse41-popcnt > ssse3
```

**æˆæƒåè®®è¦ç‚¹ï¼š**

- å…è´¹ä½¿ç”¨ï¼Œç¦æ­¢å•†ä¸šç”¨é€”ï¼ˆæœªç»æˆæƒï¼‰
- **ç¦æ­¢ä½¿ç”¨åˆ—è¡¨ï¼š** é™ˆæœè¥ã€AlanThinker (é¹é£è±¡æ£‹)ã€å›½åœ£ã€é£é£è¿½äº‘ã€æ¯å¶ã€é™é¦™ã€è€æ­¥ã€åˆ€éœ¸åˆ˜æ¶› ç­‰

#### SA Chess

- æ–‡ä»¶ï¼š`sachess_x86.exe`
- è¾ƒè€çš„å•†ä¸šå¼•æ“
- ä»… 32 ä½ç‰ˆæœ¬

---

### 5. å¼€å±€åº“ (obk/)

- æ–‡ä»¶ï¼š`BeginnerBook.obk`
- ä¸“ä¸ºåˆå­¦è€…è®¾è®¡çš„å¼€å±€åº“

---

## è§£å†³æ–¹æ¡ˆé…ç½®

**SharkChess.sln é¡¹ç›®ç»„æˆï¼š**

| é¡¹ç›® | GUID | ç›®æ ‡æ¡†æ¶ | é…ç½® |
|------|------|----------|------|
| SharkChess | `{A1B2C3D4-E5F6-7890-ABCD-EF1234567890}` | .NET 8.0 Windows | Debug/Release \| Any CPU |
| SharkEngine | `{B2C3D4E5-F6A7-8901-BCDE-F12345678901}` | C++17 | Debug/Release \| x64 |

**æ³¨æ„ï¼š** `SharkChess.Core` æœªåŒ…å«åœ¨è§£å†³æ–¹æ¡ˆä¸­ã€‚

---

## æ„å»ºä¸è¿è¡Œ

### æ„å»º SharkChess (WPF)

```powershell
# ä½¿ç”¨ dotnet CLI
cd D:\AI\SharkChess
dotnet build

# è¿è¡Œ
dotnet run
```

### æ„å»º SharkEngine (C++)

**ä½¿ç”¨ CMakeï¼š**

```powershell
cd D:\AI\SharkEngine
mkdir build
cd build
cmake .. -G "Visual Studio 17 2022" -A x64
cmake --build . --config Release
```

**ä½¿ç”¨ Visual Studioï¼š**

- æ‰“å¼€ `SharkEngine.vcxproj` æˆ– `SharkChess.sln`
- é€‰æ‹© Release x64 é…ç½®
- ç”Ÿæˆ SharkEngine é¡¹ç›®

### ä½¿ç”¨è§£å†³æ–¹æ¡ˆæ–‡ä»¶

```powershell
# ä½¿ç”¨ Visual Studio æ‰“å¼€
SharkChess.sln

# æˆ–ä½¿ç”¨ dotnet (ä»…æ„å»º C# é¡¹ç›®)
dotnet build SharkChess.sln
```

---

## æ¶æ„è®¾è®¡

### ä¾èµ–æ³¨å…¥é…ç½® (`App.xaml.cs`)

```csharp
// æœåŠ¡æ³¨å†Œ
services.AddSingleton<IGameService, GameService>();
services.AddSingleton<IEngineService, EngineService>();
services.AddSingleton<IThemeService, ThemeService>();
services.AddSingleton<MainWindow>();
```

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SharkChess (WPF UI)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MainWindow                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  å·¦ä¾§é¢æ¿    â”‚   ä¸­é—´æ£‹ç›˜åŒºåŸŸ    â”‚   å³ä¾§é¢æ¿      â”‚        â”‚
â”‚  â”‚  æ¸¸æˆèœå•    â”‚  ChessBoardCtrl  â”‚   èµ°æ£‹è®°å½•      â”‚        â”‚
â”‚  â”‚  ä¸»é¢˜é€‰æ‹©    â”‚                  â”‚   å¼•æ“è¾“å‡º      â”‚        â”‚
â”‚  â”‚  å¼•æ“çŠ¶æ€    â”‚                  â”‚                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Services                                                   â”‚
â”‚  â”œâ”€â”€ GameService â”€â”€â”€â”€ è§„åˆ™éªŒè¯ã€èµ°æ³•ç”Ÿæˆ                     â”‚
â”‚  â”œâ”€â”€ EngineService â”€â”€ UCI åè®®ã€è¿›ç¨‹é€šä¿¡                     â”‚
â”‚  â””â”€â”€ ThemeService â”€â”€ ä¸»é¢˜é…ç½®ç®¡ç†                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Models                                                     â”‚
â”‚  â””â”€â”€ ChessModels â”€â”€â”€â”€ Piece, Square, Move, GameState        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ UCI åè®®
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å¤–éƒ¨å¼•æ“ (engine/pikafish/)                      â”‚
â”‚  pikafish-avx2.exe, pikafish-bmi2.exe, etc.                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç çº¦å®š

- **è¯­è¨€ï¼š** C# ä¸»ç¨‹åºï¼ŒC++ å¼•æ“
- **å‘½åçº¦å®šï¼š**
  - C#: PascalCase (ç±»ã€æ–¹æ³•ã€å±æ€§), camelCase (å±€éƒ¨å˜é‡), _camelCase (ç§æœ‰å­—æ®µ)
  - C++: PascalCase (ç±»), camelCase (æ–¹æ³•ã€å˜é‡)
- **æ–‡ä»¶ç»„ç»‡ï¼š** æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç›®å½•ï¼ˆModelsã€Servicesã€Views ç­‰ï¼‰
- **æ³¨é‡Šè§„èŒƒï¼š** XML æ–‡æ¡£æ³¨é‡Š (`/// <summary>`)

### Git æäº¤è§„èŒƒ

éµå¾ª Conventional Commitsï¼š

```
<type>(<scope>): <summary>

[body]

[footer]
```

**ç±»å‹æ¨èï¼š**

| ç±»å‹ | è¯´æ˜ | Emoji |
|------|------|-------|
| `init` | é¡¹ç›®åˆå§‹åŒ– | ğŸ‰ |
| `feat` | æ–°åŠŸèƒ½ | âœ¨ |
| `fix` | Bug ä¿®å¤ | ğŸ |
| `docs` | æ–‡æ¡£å˜æ›´ | ğŸ“ƒ |
| `style` | ä»£ç æ ¼å¼åŒ– | ğŸŒˆ |
| `refactor` | ä»£ç é‡æ„ | ğŸ¦„ |
| `perf` | æ€§èƒ½ä¼˜åŒ– | ğŸˆ |
| `test` | æµ‹è¯•ç›¸å…³ | ğŸ§ª |
| `build` | æ„å»ºç³»ç»Ÿå˜æ›´ | ğŸ”§ |
| `ci` | CI é…ç½® | ğŸ |
| `chore` | è¾…åŠ©å·¥å…·å˜æ›´ | ğŸ³ |
| `revert` | æ’¤é”€æäº¤ | â†©ï¸ |

**ç¤ºä¾‹ï¼š**

```
feat(engine): æ·»åŠ  UCI åè®®è¶…æ—¶å¤„ç†
fix(ui): ä¿®å¤æ£‹ç›˜ç¼©æ”¾æ¯”ä¾‹è®¡ç®—é”™è¯¯
docs: æ›´æ–° README æ„å»ºè¯´æ˜
```

### æµ‹è¯•å®è·µ

- å•å…ƒæµ‹è¯•ï¼š`xUnit` / `NUnit` (å¾…å¼•å…¥)
- æµ‹è¯•è¦†ç›–ï¼šè§„åˆ™éªŒè¯ã€è¾¹ç•Œæ¡ä»¶ã€é”™è¯¯æ¢å¤
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`*.Tests.cs`

---

## å·²çŸ¥é—®é¢˜ä¸å¾…åŠ

### åŠŸèƒ½ç¼ºå¤±

| ç»„ä»¶ | é—®é¢˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `GameService.LoadFromFEN()` | FEN è§£ææœªå®ç° | é«˜ |
| `GameService.CheckGameState()` | å°†æ­»æ£€æµ‹ä¸å®Œæ•´ | é«˜ |
| `SharkEngine` | æœªç¼–è¯‘ï¼Œæ— è¾“å‡ºæ–‡ä»¶ | é«˜ |
| `EngineService.isready` | æ¡æ‰‹é€»è¾‘ä¸å®Œæ•´ | ä¸­ |

### ä»£ç è´¨é‡é—®é¢˜

| é—®é¢˜ | ä½ç½® | å»ºè®® |
|------|------|------|
| MVVM æ¶æ„ä¸ä¸€è‡´ | `MainWindow.xaml.cs` | é€šè¿‡ `MainViewModel` æ“ä½œæœåŠ¡ |
| äº‹ä»¶è®¢é˜…å†…å­˜æ³„æ¼ | `ChessBoardControl.cs` | å®ç°å–æ¶ˆè®¢é˜…æœºåˆ¶ |
| ç¡¬ç¼–ç é­”æ³•æ•°å­— | `ChessBoardControl.cs:27-31` | ç§»è‡³é…ç½®ç±» |
| ä¸­æ–‡è®°è°±è½¬æ¢ä¸å®Œæ•´ | `ChessModels.cs:155-190` | å®Œå–„è½¬æ¢é€»è¾‘ |
| ç©º catch å— | `EngineService.cs` | æ·»åŠ é”™è¯¯å¤„ç†é€»è¾‘ |

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

| ä¼˜åŒ–ç‚¹ | å½“å‰çŠ¶æ€ | å»ºè®® |
|--------|----------|------|
| æ£‹ç›˜ç»˜åˆ¶ | å…¨é‡é‡ç»˜ | ä½¿ç”¨ `DrawingVisual` ç¼“å­˜é™æ€éƒ¨åˆ† |
| è½å­ç‚¹æ ‡è®° | ç¡¬ç¼–ç ä½ç½® | é…ç½®é©±åŠ¨ |
| è¯„ä¼°å‡½æ•° | mobility/kingSafety è¿”å› 0 | å®ç°å®Œæ•´è¯„ä¼° |

### ç©ºç›®å½•

- `.iflow/` - iFlow é…ç½®ç›®å½•ï¼ˆç©ºï¼‰
- `SharkChess.Core/` - æ ¸å¿ƒåº“ï¼ˆç©ºï¼Œæœªçº³å…¥è§£å†³æ–¹æ¡ˆï¼‰
- `SharkChess/Converters/` - è½¬æ¢å™¨ï¼ˆç©ºï¼‰
- `SharkChess/Resources/` - èµ„æºæ–‡ä»¶ï¼ˆç©ºï¼‰

---

## ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- é²¨é±¼è±¡æ£‹å®˜ç½‘ï¼šhttp://sharkchess.com
- Pikafish å®˜ç½‘ï¼šhttp://pikafish.com
- Pikafish GitHubï¼šhttps://github.com/official-pikafish/Pikafish

### ç¤¾åŒº

- é²¨é±¼è±¡æ£‹äº¤æµç¾¤ï¼š47358882
- Pikafish QQ ç¾¤ï¼š755655813 (ä¸€ç¾¤)

### å†å²ç‰ˆæœ¬

è¯¦è§ `é²¨é±¼è±¡æ£‹ä»‹ç»åŠç‰ˆæœ¬å‡çº§è¯´æ˜.txt`

**v1.8.0 (2024-06-15) ä¸»è¦æ›´æ–°ï¼š**

- PGN æ£‹è°±æ”¯æŒè¯»å– ICCS æ ¼å¼
- HashFull ä¿¡æ¯æ˜¾ç¤º
- WDL (èƒœ/å’Œ/è´Ÿæ¦‚ç‡) ä¿¡æ¯æ˜¾ç¤º

**å…³é”®é‡Œç¨‹ç¢‘ï¼š**

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¸»è¦å˜æ›´ |
|------|------|----------|
| 1.8.0 | 2024-06-15 | ICCS æ ¼å¼ã€HashFullã€WDL æ”¯æŒ |
| 1.7.9 | 2022-11-30 | å¼•æ“é€‰é¡¹è®¾ç½®ã€çš®å¡é±¼å¼•æ“é›†æˆ |
| 1.7.8 | 2022-09-22 | åˆ†æ•°æ˜¾ç¤ºæ¨¡å¼è®¾ç½® |
| 1.7.0 | 2019-03-24 | çª—å£åœé ã€äº‘åº“ã€å¸ƒå±€ä¿å­˜ |
| 1.6.0 | 2019-01-18 | çª—å£åœé ã€äº‘åº“çª—å£ |

---

## å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

```powershell
# æ„å»ºå¹¶è¿è¡Œ WPF ç¨‹åº
cd D:\AI\SharkChess
dotnet run

# æ„å»º SharkEngine
cd D:\AI\SharkEngine\build
cmake --build . --config Release

# æ¸…ç†æ„å»ºç¼“å­˜
dotnet clean
```

### å…³é”®æ–‡ä»¶è·¯å¾„

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| æ¸¸æˆè§„åˆ™å®ç° | `SharkChess/Services/GameService.cs` |
| å¼•æ“é€šä¿¡ | `SharkChess/Services/EngineService.cs` |
| æ£‹ç›˜æ¸²æŸ“ | `SharkChess/Views/Controls/ChessBoardControl.cs` |
| æ•°æ®æ¨¡å‹ | `SharkChess/Models/ChessModels.cs` |
| UCI åè®® | `SharkEngine/src/uci/UCIProtocol.cpp` |
| æœç´¢ç®—æ³• | `SharkEngine/src/core/Search.cpp` |
| èµ°æ³•ç”Ÿæˆ | `SharkEngine/src/core/MoveGen.cpp` |
| è¯„ä¼°å‡½æ•° | `SharkEngine/src/core/Evaluation.cpp` |

---

*æœ€åæ›´æ–°ï¼š2026-02-21*